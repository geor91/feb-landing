$(function(){var t={init:function(t){this.targetId=t,this.targetHtml=$(t+"Tpl").html(),this.loadHtml(),this.initEvents()},loadHtml:function(){$("body").append(this.targetHtml)},cleanHtml:function(){$(this.targetId).remove()},initEvents:function(){$(this.targetId).modal("show"),$(this.targetId+" .inputmask").inputmask(),$(this.targetId).on("hidden.bs.modal",function(){t.cleanHtml()}),$(this.targetId+" form.js-ajax-form").on("submit",function(t){t.preventDefault();var a=$(this).parents(".ajax-form"),n=$(this).serializeArray(),i={};for(var e in n){var o=n[e];i[o.name]=o.value}$.ajax({url:"/taxi/public/statement?native=true",type:"POST",data:JSON.stringify(i),contentType:"application/json; charset=utf-8"}).done(function(){$(a).addClass("ajax-form_completed")}).fail(function(){alert("Проблемы с соединением. Заявка не была отправлена.")})})}};$("[data-modal]").click(function(a){var n=$(this).data("modal");t.init(n)}),$(".js-anchor").click(function(t){t.preventDefault();var a=$(this).attr("href"),n=$(a).offset().top,i=$("header").outerHeight(),e=66,o=i-e,r=n-i-o;$("body,html").animate({scrollTop:r},600)}),$(window).scroll(function(){var t=$("header"),a=t.outerHeight(),n=$(window).scrollTop();n>a+100?t.addClass("fixed-header"):t.removeClass("fixed-header")}),$("#sendSmsBtn").click(function(t){var a="7"+$("#sendSmsPhone").inputmask("unmaskedvalue"),n="/taxi/rest/public/link/"+a;$.ajax({url:n,type:"POST"}).done(function(){alert("Сообщение отправлено.")}).fail(function(){alert("Проблемы с соединением. Сообщение не отправлено.")})})}),$(function(){$(".inputmask").inputmask()});